<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="hr_movement_tree_views" model="ir.ui.view">
        <field name="name">hr.movement.tree.views</field>
        <field name="model">hr.movement</field>
        <field name="arch" type='xml'>
            <tree string="Hr Movement Tree">
                <field name="movement_type_id"/>
                <field name="used_id"/>
                <field name="s_employee_id"/>
                <field name="s_employee_name"/>
                <field name="posting_date"/>
                <field name="effective_date"/>
                <field name="action_user_ids" invisible="1"/>
                <field name="remark"/>
                <field name="status" widget="badge" decoration-info="status == 'to_submit'"
                       decoration-warning="status == 'to_approve'" decoration-success="status == 'approved'"/>
            </tree>
        </field>
    </record>

    <record id="hr_movement_form_views" model="ir.ui.view">
        <field name="name">hr.movement.form.views</field>
        <field name="model">hr.movement</field>
        <field name="arch" type='xml'>
            <form string="Hr Movement Form">
                <header>
                    <field name="is_invisible_button" invisible="1"/>
                    <button string="To Approve" name="action_confirm_movement" type="object" class="oe_highlight"
                            invisible="status != 'to_submit'"/>
                    <button string="Approved" name="action_approved_movement" type="object" class="oe_highlight"
                            invisible="status != 'to_approve'"/>
                    <button string="Refuse" name="action_refused_movement" type="object"
                            invisible="status not in ['to_approve','approved']"/>
                    <button string="Mark as Draft" name="action_draft_movement" type="object"
                            invisible="status != 'refused'"/>
                    <field name="status" widget="statusbar" statusbar_visible="to_approve,refused,approved"/>
                </header>
                <sheet>
                    <group class="form_base_movement">
                        <group>
                            <field name="used_id"/>
                            <field name="s_employee_id"/>
                            <field name="s_employee_name"/>
                            <field name="s_company"/>
                        </group>
                        <group>
                            <field name="movement_type_id"/>
                            <field name="effective_date"/>
                            <field name="posting_date"/>
                            <field name="s_type" required="is_type_job_rotation_request == True"
                                   invisible="is_type_job_rotation_request == False"/>
                            <field name="s_transfer_type" invisible="is_type_transfer_request == False"/>
                            <field name="s_salary_adjustment_type"
                                   invisible="is_type_salary_adjustment_request == False"/>
                            <field name="retirement_type" invisible="movement_type_id != 5 "/>
                            <field name="termination_due_to" invisible="movement_type_id != 7 "/>
                            <field name="end_of_contract_due_to" invisible="movement_type_id != 8 "/>
                            <field name="current_employee_status" invisible="movement_type_id not in (5, 6, 7, 8)"/>
                        </group>
                    </group>

                    <group>
                        <field name="remark"/>
                        <field name="is_type_job_rotation_request" invisible="1"/>
                        <field name="is_type_regularization_request" invisible="1"/>
                        <field name="is_type_transfer_request" invisible="1"/>
                        <field name="is_type_salary_adjustment_request" invisible="1"/>
                        <field name="is_type_extension_of_service_request" invisible="1"/>
                    </group>

                    <group class="job_rotation_request" invisible="is_type_job_rotation_request == False">
                        <group>
                            <field name="s_current_position"/>
                            <field name="s_current_job_level"/>
                            <field name="s_current_rate_type"/>
                            <field name="s_current_rate"/>
                            <field name="s_current_no_hours"/>
                            <field name="s_current_minimum_take_home"/>
                            <field name="s_current_cost_center"/>
                            <field name="s_current_total_year_days"/>
                            <field name="s_current_no_hours"/>
                            <field name="s_current_is_other" invisible="1"/>
                            <field name="s_current_other" invisible="not s_current_is_other"/>
                            <field name="s_current_period_group"/>
                            <field name="s_current_payroll_schedule"/>
                            <field name="s_current_attendance_based"/>
                        </group>
                        <group>
                            <field name="s_new_position_title" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_job_level" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_rate_type" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_rate" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_no_hours" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_minimum_take_home" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_cost_center" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_total_year_days" required="is_type_job_rotation_request == True"/>
                            <field name="s_is_other_total_year_days" invisible="1"/>
                            <field name="s_other_total_year_days" invisible="not s_is_other_total_year_days"/>
                            <field name="s_new_no_hours" required="is_type_job_rotation_request == True"/>
                            <field name="s_new_period_group"/>
                            <field name="s_new_payroll_schedule" required="is_type_job_rotation_request == True"/>
                            <field name="s_is_processed"/>
                        </group>
                    </group>

                    <group class="regularization_request" invisible="is_type_regularization_request == False">
                        <group>
                            <field name="current_employee_status"/>
                            <field name="s_current_position" string="Current Position Title"/>
                            <field name="s_current_job_level"/>
                            <field name="s_current_rate_type"/>
                            <field name="s_current_rate"/>
                            <field name="s_current_no_hours"/>
                            <field name="s_current_minimum_take_home"/>
                            <field name="s_current_cost_center"/>
                            <field name="s_current_total_year_days"/>
                            <field name="s_current_is_other" invisible="1"/>
                            <field name="s_current_other" invisible="not s_current_is_other"/>
                            <field name="current_rate_classification"/>
                            <field name="s_current_attendance_based"/>
                        </group>
                        <group>
                            <field name="s_new_employee_status" required="is_type_regularization_request == True"/>
                            <field name="s_new_position_title" required="is_type_regularization_request == True"/>
                            <field name="s_new_job_level" required="is_type_regularization_request == True"/>
                            <field name="s_new_rate_type" required="is_type_regularization_request == True"/>
                            <field name="s_new_rate" required="is_type_regularization_request == True"/>
                            <field name="s_new_no_hours" required="is_type_regularization_request == True"/>
                            <field name="s_new_minimum_take_home" required="is_type_regularization_request == True"/>
                            <field name="s_new_cost_center" required="is_type_regularization_request == True"/>
                            <field name="s_new_total_year_days" required="is_type_regularization_request == True"/>
                            <field name="s_is_other_total_year_days" invisible="1"/>
                            <field name="s_other_total_year_days" invisible="not s_is_other_total_year_days"/>
                            <field name="new_rate_classification"/>
                            <field name="s_is_processed"/>
                        </group>
                    </group>

                    <group class="transfer_request" invisible="is_type_transfer_request == False">
                        <group>
                            <field name="s_current_department"/>
                            <field name="s_current_location"/>
                            <field name="s_current_position" string="Current Position Title"/>
                            <field name="s_current_job_grade"/>
                            <field name="s_current_job_level"/>
                            <field name="s_current_rate_type"/>
                            <field name="s_current_rate"/>
                            <field name="s_current_no_hours"/>
                            <field name="s_current_minimum_take_home"/>
                            <field name="s_current_cost_center"/>
                            <field name="s_current_total_year_days"/>
                            <field name="current_rate_classification"/>
                            <field name="s_current_period_group"/>
                            <field name="s_current_payroll_schedule"/>
                            <field name="s_current_attendance_based"/>
                        </group>
                        <group>
                            <field name="s_new_company" required="is_type_transfer_request == True"/>
                            <field name="s_new_department" required="is_type_transfer_request == True"/>
                            <field name="s_new_location" required="is_type_transfer_request == True"/>
                            <field name="s_new_position_title" required="is_type_transfer_request == True"/>
                            <field name="s_new_job_grade"/>
                            <field name="s_new_job_level" required="is_type_transfer_request == True"/>
                            <field name="s_new_rate_type" required="is_type_transfer_request == True"/>
                            <field name="s_new_rate" required="is_type_transfer_request == True"/>
                            <field name="s_new_no_hours" required="is_type_transfer_request == True"/>
                            <field name="s_new_minimum_take_home" required="is_type_transfer_request == True"/>
                            <field name="s_new_cost_center" required="is_type_transfer_request == True"/>
                            <field name="s_new_total_year_days" required="is_type_transfer_request == True"/>
                            <field name="s_is_other_total_year_days" invisible="1"/>
                            <field name="s_other_total_year_days" invisible="not is_type_transfer_request"/>
                            <field name="new_rate_classification"/>
                            <field name="s_new_period_group"/>
                            <field name="s_new_payroll_schedule" required="is_type_transfer_request == True"/>
                            <field name="s_is_processed"/>
                        </group>
                    </group>

                    <group class="salary_adjustment_request" invisible="is_type_salary_adjustment_request == False">
                        <group>

                            <field name="s_current_rate_type"/>
                            <field name="s_current_rate"/>
                            <field name="s_current_no_hours"/>
                            <field name="s_current_minimum_take_home"/>
                            <field name="s_current_cost_center"/>
                            <field name="s_current_total_year_days"/>
                            <field name="current_rate_classification"/>
                            <field name="s_current_attendance_based"/>
                        </group>
                        <group>
                            <field name="s_new_rate_type" required="is_type_salary_adjustment_request == True"/>
                            <field name="s_new_rate" required="is_type_salary_adjustment_request == True"/>
                            <field name="s_new_no_hours" required="is_type_salary_adjustment_request == True"/>
                            <field name="s_new_minimum_take_home" required="is_type_salary_adjustment_request == True"/>
                            <field name="s_new_cost_center" required="is_type_salary_adjustment_request == True"/>
                            <field name="s_new_total_year_days" required="is_type_salary_adjustment_request == True"/>
                            <field name="s_is_other_total_year_days" invisible="1"/>
                            <field name="s_other_total_year_days" invisible="not s_is_other_total_year_days"/>
                            <field name="new_rate_classification"/>
                            <field name="s_is_processed"/>
                        </group>
                    </group>

                    <group class="extension_of_service_request"
                           invisible="is_type_extension_of_service_request == False">
                        <group>
                            <field name="s_current_end_of_contract_date"/>
                            <field name="s_current_date_hired"/>
                            <field name="s_current_employee_status"/>
                        </group>
                        <group>
                            <field name="s_new_end_of_contract"/>
                            <field name="s_new_date_hired" required="is_type_extension_of_service_request == True"/>
                            <field name="s_new_employee_status"/>
                            <field name="s_is_processed"/>
                        </group>
                    </group>

                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="hr_movement_filter_views" model="ir.ui.view">
        <field name="name">hr.movement.filter.views</field>
        <field name="model">hr.movement</field>
        <field name="arch" type="xml">
            <search string="HR Movement search">
                <field name="movement_type_id"/>
                <field name="used_id"/>
                <field name="s_employee_id"/>
                <field name="s_employee_name"/>
                <field name="posting_date"/>
                <field name="effective_date"/>
                <field name="remark"/>
                <field name="status"/>
                <searchpanel>
                    <field name="status" icon="fa-building" enable_counters="1"/>
                    <field name="department_id" icon="fa-users" enable_counters="1"/>
                </searchpanel>
                <filter name="message_needaction" string="Unread Messages" domain="[('message_needaction', '=', True)]"
                        groups="mail.group_mail_notification_type_inbox"/>
                <separator/>
                <filter name="archived" string="Archived" domain="[('active', '=', False)]"/>
                <filter name="department" string="By Department" domain="[]" context="{'group_by':'department_id'}"/>
                <separator/>
                <filter name="status" string="By Status" domain="[]" context="{'group_by':'status'}"/>
                <separator/>
            </search>
        </field>
    </record>

    <record id="action_hr_movement" model="ir.actions.act_window">
        <field name="name">Employee Movement</field>
        <field name="res_model">hr.movement</field>
        <field name="view_mode">tree,form</field>
    </record>
</odoo>